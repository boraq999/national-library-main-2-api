import{d as R,j as e,B as p,o as C,a3 as S,q as u,e as w,aa as W,U as k,ab as _,ac as B,ad as m,ae as n,af as E,a4 as I}from"./mui-MBCd4ndD.js";import{r as c}from"./vendor-gvDtyKy-.js";import{d as F,a as U}from"./Clear-B837EVjW.js";import{M as $,a as H}from"./index-B0hdAOi5.js";import{A as M}from"./config-gz8lDFmP.js";import"./router-gA8worJh.js";const N=()=>{const s=R(),[i,g]=c.useState(""),[l,x]=c.useState(null),[f,o]=c.useState(!1),[b,h]=c.useState(!1),j=async t=>{t.preventDefault(),h(!0),x(null),o(!1);try{const r=encodeURIComponent(i),d=`${M}/reserved-thesis-titles-search-person-guests?q=${r}`,a=await(await fetch(d)).json();h(!1),a&&a.length>0?x(a):o(!0)}catch(r){console.error("Error fetching data:",r),h(!1),o(!0)}},y=()=>{g(""),x(null),o(!1)},A=(t,r)=>{if(!t||!r.trim())return t;const d=new RegExp(`(${r.trim()})`,"gi");return t.split(d).map((a,v)=>d.test(a)?e.jsx("span",{style:{backgroundColor:"#33d13d99",padding:"3px 7px",borderRadius:"5px",border:"1px solid yellow"},children:a},v):a)};return e.jsx(p,{sx:{minHeight:"80vh",display:"flex",alignItems:"center",justifyContent:"center",py:15,px:{xs:1,md:10,lg:15},...s.bgGrid1},children:e.jsxs(C,{children:[e.jsx($,{mainTitle:"المعاملات الجاهزة"}),e.jsx(H,{mainText:"أدخل اسم الباحث للبحث في قاعدة بيانات المكتبة الوطنية."}),e.jsxs(p,{component:"form",onSubmit:j,sx:{display:"flex",gap:2,mb:4,justifyContent:"center",pt:10,flexDirection:{xs:"column",md:"row"}},children:[e.jsx(S,{fullWidth:!0,variant:"outlined",placeholder:"اكتب اسم الباحث...",value:i,onChange:t=>g(t.target.value),sx:{background:s.palette.background.paper,borderRadius:2}}),e.jsxs(p,{sx:{display:"flex",gap:1},children:[e.jsx(u,{type:"submit",variant:"contained",color:"primary",size:"large",startIcon:e.jsx(F,{}),disabled:b||!i.trim(),sx:{px:4,fontWeight:700,borderRadius:2,...s.btn1,"&:hover":{...s.btn1Hover}},children:"بحث"}),e.jsx(u,{variant:"outlined",color:"inherit",size:"large",startIcon:e.jsx(U,{}),onClick:y,disabled:!i.trim(),sx:{fontWeight:700,borderRadius:2},children:"مسح"})]})]}),Array.isArray(l)&&l.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(w,{variant:"subtitle1",sx:{mt:2,textAlign:"right",fontWeight:600,color:s.palette.primary.main},children:["تم العثور على",e.jsx("span",{style:{backgroundColor:s.palette.bg3.main,padding:"4px 7px",borderRadius:"5px",border:"1px solid yellow",color:"#fff"},children:l.length})]}),e.jsx(W,{component:k,sx:{mt:2,...s.card2,direction:"rtl"},children:e.jsxs(_,{dir:"rtl",children:[e.jsx(B,{children:e.jsxs(m,{sx:{backgroundColor:s.palette.mode==="light"?"rgba(0, 0, 0, 0.04)":"rgba(255, 255, 255, 0.05)"},children:[e.jsx(n,{sx:{fontWeight:700,textAlign:"start"},children:"الجامعة"}),e.jsx(n,{sx:{fontWeight:700,textAlign:"start"},children:"اسم الباحث"}),e.jsx(n,{sx:{fontWeight:700,textAlign:"start"},children:"عنوان الرسالة"})]})}),e.jsx(E,{children:l.map((t,r)=>e.jsxs(m,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e.jsx(n,{sx:{textAlign:"start"},children:t.university||"---"}),e.jsx(n,{sx:{textAlign:"start"},children:t.person_name?A(t.person_name,i):"---"}),e.jsx(n,{sx:{textAlign:"start"},children:t.title})]},r))})]})})]}),f&&e.jsx(I,{severity:"warning",sx:{mt:4,fontWeight:700,borderRadius:2,textAlign:"center"},children:"لا توجد نتائج لهذا الباحث في قاعدة البيانات."})]})})};export{N as default};
